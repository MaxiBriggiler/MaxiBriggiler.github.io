<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Maximiliano Briggiler ‚Äî CV Dashboard</title>
  <meta name="description" content="Dashboard CV de Maximiliano Briggiler. Especialista en SAP, Controlling y BI." />
  
  <!-- Carga de Chart.js para gr√°ficos profesionales -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root {
      /* Colores Base - Dark Mode (Default) */
      --bg-app: #0f172a;       /* Slate 900 */
      --bg-panel: #1e293b;     /* Slate 800 */
      --bg-card: #334155;      /* Slate 700 */
      --text-main: #f1f5f9;    /* Slate 100 */
      --text-muted: #94a3b8;   /* Slate 400 */
      
      --accent-primary: #38bdf8; /* Sky 400 */
      --accent-secondary: #818cf8; /* Indigo 400 */
      
      --border: rgba(255,255,255,0.08);
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.15);
      
      --font-stack: 'Inter', system-ui, -apple-system, sans-serif;
      --radius: 16px;
    }

    /* Light Mode */
    .light-mode {
      --bg-app: #f0f2f5;
      --bg-panel: #ffffff;
      --bg-card: #f8fafc;
      --text-main: #1e293b;
      --text-muted: #64748b;
      
      --accent-primary: #0284c7; /* Sky 600 */
      --accent-secondary: #4f46e5; /* Indigo 600 */
      
      --border: rgba(0,0,0,0.08);
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
    }

    /* Utilitarios de Idioma */
    .lang-en { display: none; }
    html[lang="en"] .lang-es { display: none !important; }
    html[lang="en"] .lang-en { display: inline !important; }

    * { box-sizing: border-box; transition: background-color 0.3s ease, color 0.2s ease; }
    
    body {
      margin: 0;
      font-family: var(--font-stack);
      background-color: var(--bg-app);
      color: var(--text-main);
      height: 100vh;
      overflow: hidden; /* App-like feel */
    }

    /* Layout Principal */
    .app-container {
      display: grid;
      grid-template-columns: 280px 1fr;
      height: 100vh;
    }

    /* --- SIDEBAR --- */
    aside {
      background: var(--bg-panel);
      border-right: 1px solid var(--border);
      padding: 24px;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      z-index: 10;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 30px;
    }
    .brand-avatar {
      width: 48px; height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      display: grid; place-items: center;
      font-weight: bold; color: white; font-size: 20px;
    }
    .brand-text h1 { margin: 0; font-size: 18px; font-weight: 700; line-height: 1.2; }
    .brand-text span { font-size: 12px; color: var(--text-muted); }

    .nav-menu {
      display: flex;
      flex-direction: column;
      gap: 8px;
      flex: 1;
    }
    .nav-item {
      padding: 12px 16px;
      border-radius: 12px;
      background: transparent;
      border: none;
      color: var(--text-muted);
      text-align: left;
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.2s;
    }
    .nav-item:hover { background: var(--bg-card); color: var(--text-main); }
    .nav-item.active {
      background: color-mix(in srgb, var(--accent-primary) 15%, transparent);
      color: var(--accent-primary);
      font-weight: 600;
    }

    .contact-box {
      margin-top: auto;
      background: var(--bg-card);
      padding: 16px;
      border-radius: 12px;
      font-size: 12px;
      border: 1px solid var(--border);
    }
    .contact-row { display: flex; justify-content: space-between; margin-bottom: 8px; }
    .contact-row:last-child { margin-bottom: 0; }
    .contact-row span { color: var(--text-muted); }
    .contact-row a { color: var(--accent-primary); text-decoration: none; }

    /* --- MAIN CONTENT --- */
    main {
      padding: 24px 32px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    /* Header Superior */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .header-title h2 { margin: 0; font-size: 24px; }
    .header-title p { margin: 4px 0 0; color: var(--text-muted); font-size: 14px; }
    
    .actions { display: flex; gap: 10px; }
    .btn {
      padding: 8px 16px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--bg-panel);
      color: var(--text-main);
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      display: flex; align-items: center; gap: 6px;
    }
    .btn:hover { background: var(--bg-card); transform: translateY(-1px); }

    /* Grid Layout for Sections */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      animation: fadeIn 0.4s ease-out;
    }

    .card {
      background: var(--bg-panel);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      height: 100%; /* Para igualar alturas */
      display: flex;
      flex-direction: column;
    }
    .card-title { font-size: 16px; font-weight: 700; margin-bottom: 16px; display: flex; justify-content: space-between; }
    
    /* Utilidades de Grilla */
    .col-span-2 { grid-column: span 2; }
    .col-span-3 { grid-column: span 3; }

    /* Nueva clase para dividir los gr√°ficos 50/50 */
    .split-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    /* KPI Cards */
    .kpi-card { justify-content: space-between; height: 120px; }
    .kpi-val { font-size: 36px; font-weight: 800; color: var(--text-main); }
    .kpi-label { font-size: 13px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }

    /* Charts Containers */
    .chart-container { 
      position: relative; 
      flex: 1; /* Ocupar espacio restante */
      min-height: 220px; 
      width: 100%; 
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Experience Accordion */
    .exp-item { border-bottom: 1px solid var(--border); padding-bottom: 16px; margin-bottom: 16px; }
    .exp-item:last-child { border: none; margin: 0; padding: 0; }
    .exp-header { display: flex; justify-content: space-between; cursor: pointer; padding: 8px 0; }
    .exp-header:hover .exp-role { color: var(--accent-primary); }
    .exp-role { font-weight: 700; font-size: 16px; display: block; }
    .exp-company { color: var(--text-muted); font-size: 14px; margin-top: 2px; }
    .exp-date { font-size: 13px; color: var(--accent-secondary); font-family: monospace; }
    .exp-body { display: none; margin-top: 10px; font-size: 14px; line-height: 1.6; color: var(--text-muted); }
    .exp-body.open { display: block; animation: slideDown 0.3s ease; }
    .exp-body ul { margin: 0; padding-left: 20px; }
    .exp-body li { margin-bottom: 6px; }

    /* Skills Chips */
    .skill-filters { margin-bottom: 15px; display: flex; gap: 8px; flex-wrap: wrap; }
    .filter-chip { padding: 6px 12px; border-radius: 20px; font-size: 12px; cursor: pointer; border: 1px solid var(--border); background: var(--bg-card); color: var(--text-muted); }
    .filter-chip.active { background: var(--accent-primary); color: white; border-color: transparent; }
    
    .skills-grid { display: flex; flex-wrap: wrap; gap: 8px; }
    .skill-tag { padding: 6px 12px; border-radius: 8px; font-size: 13px; background: color-mix(in srgb, var(--bg-card), white 5%); border: 1px solid var(--border); display: flex; align-items: center; gap: 6px; }
    .skill-tag.hidden { display: none; }

    /* Tab Logic */
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* Animations */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

    /* Mobile Responsive */
    @media (max-width: 900px) {
      .app-container { grid-template-columns: 1fr; height: auto; overflow: auto; }
      aside { position: relative; height: auto; border-bottom: 1px solid var(--border); border-right: none; }
      main { padding: 16px; overflow: visible; }
      .dashboard-grid { grid-template-columns: 1fr; }
      .col-span-2, .col-span-3 { grid-column: span 1; }
      .split-row { grid-template-columns: 1fr; } /* Apilar gr√°ficos en m√≥vil */
    }

    @media print {
      aside, .actions, .skill-filters { display: none !important; }
      .app-container { display: block; }
      main { padding: 0; }
      .card { box-shadow: none; border: 1px solid #ccc; break-inside: avoid; margin-bottom: 20px; }
      .exp-body { display: block !important; }
      body { background: white; color: black; }
    }
  </style>
</head>
<body>

  <div class="app-container">
    <!-- BARRA LATERAL -->
    <aside>
      <div class="brand">
        <div class="brand-avatar">MB</div>
        <div class="brand-text">
          <h1>Maximiliano Briggiler</h1>
          <span>
            <span class="lang-es">Contabilidad & BI</span>
            <span class="lang-en">Accounting & BI</span>
          </span>
        </div>
      </div>

      <nav class="nav-menu" role="tablist">
        <button class="nav-item active" onclick="switchTab('overview')">
          <span>üìä</span> <span class="lang-es">Resumen</span><span class="lang-en">Overview</span>
        </button>
        <button class="nav-item" onclick="switchTab('experience')">
          <span>üíº</span> <span class="lang-es">Experiencia</span><span class="lang-en">Experience</span>
        </button>
        <button class="nav-item" onclick="switchTab('skills')">
          <span>üß©</span> <span class="lang-es">Habilidades</span><span class="lang-en">Skills</span>
        </button>
        <button class="nav-item" onclick="switchTab('education')">
          <span>üéì</span> <span class="lang-es">Educaci√≥n</span><span class="lang-en">Education</span>
        </button>
      </nav>

      <div class="contact-box">
        <div class="contact-row">
          <span>Email</span>
          <a href="mailto:mcbriggiler@gmail.com">mcbriggiler...</a>
        </div>
        <div class="contact-row">
          <span>LinkedIn</span>
          <a href="https://linkedin.com/in/maximiliano-briggiler" target="_blank">/in/maximiliano...</a>
        </div>
        <div class="contact-row">
          <span>
            <span class="lang-es">Ubicaci√≥n</span>
            <span class="lang-en">Location</span>
          </span>
          <span>Arg</span>
        </div>
        <div style="margin-top:12px; display:flex; gap:8px;">
          <button class="btn" style="flex:1; justify-content:center;" onclick="window.print()">PDF</button>
          <button class="btn" id="copyMail" style="flex:1; justify-content:center;">Copy</button>
        </div>
      </div>
    </aside>

    <!-- CONTENIDO PRINCIPAL -->
    <main>
      <header>
        <div class="header-title">
          <h2 id="pageTitle">
            <span class="lang-es">Panel General</span>
            <span class="lang-en">Overview Dashboard</span>
          </h2>
          <p>
            <span class="lang-es">Vista ejecutiva del perfil profesional</span>
            <span class="lang-en">Executive view of professional profile</span>
          </p>
        </div>
        <div class="actions">
          <button class="btn" onclick="toggleLang()">
            üåê <span id="langLabel">EN</span>
          </button>
          <button class="btn" onclick="toggleTheme()">
            üåì <span class="lang-es">Tema</span><span class="lang-en">Theme</span>
          </button>
        </div>
      </header>

      <!-- TAB: OVERVIEW -->
      <section id="overview" class="tab-content active">
        <div class="dashboard-grid">
          
          <!-- Extracto / About -->
          <div class="card col-span-3">
            <div class="card-title">
              <span class="lang-es">Perfil Profesional</span>
              <span class="lang-en">Professional Profile</span>
            </div>
            <p style="color:var(--text-muted); line-height:1.6; margin:0;">
              <span class="lang-es">
                Profesional con <b>15+ a√±os de experiencia</b> en Contabilidad, Controlling y An√°lisis de Datos (Retail, Metal√∫rgica, L√°ctea). 
                Experto en <b>SAP (GL, AA, CO-PA)</b> y Key User en implementaciones S/4HANA. 
                Actualmente enfocado en la transformaci√≥n digital mediante <b>BI (SAP Analytics Cloud)</b> y explorando la 
                automatizaci√≥n de procesos con <b>IA (Make, n8n)</b> para la toma de decisiones estrat√©gicas.
              </span>
              <span class="lang-en">
                Professional with <b>15+ years of experience</b> in Accounting, Controlling, and Data Analysis (Retail, Metal, Dairy). 
                Expert in <b>SAP (GL, AA, CO-PA)</b> and Key User in S/4HANA implementations. 
                Currently focused on digital transformation via <b>BI (SAP Analytics Cloud)</b> and exploring process automation 
                with <b>AI (Make, n8n)</b> for strategic decision-making.
              </span>
            </p>
          </div>

          <!-- KPIs -->
          <div class="card kpi-card">
            <div class="kpi-label">
              <span class="lang-es">Experiencia</span><span class="lang-en">Experience</span>
            </div>
            <div class="kpi-val">15+</div>
            <div style="font-size:12px; color:var(--text-muted)">
              <span class="lang-es">A√±os de trayectoria</span><span class="lang-en">Years career</span>
            </div>
          </div>
          <div class="card kpi-card">
            <div class="kpi-label">SAP Key User</div>
            <div class="kpi-val">S/4</div>
            <div style="font-size:12px; color:var(--text-muted)">HANA Implementation</div>
          </div>
          <div class="card kpi-card">
            <div class="kpi-label">Stack</div>
            <div class="kpi-val">BI & AI</div>
            <div style="font-size:12px; color:var(--text-muted)">SAC, Python, Make</div>
          </div>

          <!-- FILA DE GR√ÅFICOS (Ahora dividida 50/50) -->
          <div class="split-row col-span-3">
            
            <!-- CHART 1: Timeline -->
            <div class="card">
              <div class="card-title">
                <span class="lang-es">Trayectoria (A√±os)</span>
                <span class="lang-en">Career Path (Years)</span>
              </div>
              <div class="chart-container">
                <canvas id="careerChart"></canvas>
              </div>
            </div>

            <!-- CHART 2: Skills Mix -->
            <div class="card">
              <div class="card-title">
                <span class="lang-es">Mix de Competencias</span>
                <span class="lang-en">Skills Mix</span>
              </div>
              <div class="chart-container">
                <canvas id="skillsChart"></canvas>
              </div>
            </div>

          </div>
          <!-- Fin Fila de Gr√°ficos -->

        </div>
      </section>

      <!-- TAB: EXPERIENCE -->
      <section id="experience" class="tab-content">
        <div class="card">
          <div class="card-title">
            <span class="lang-es">Detalle de Experiencia</span>
            <span class="lang-en">Experience Detail</span>
          </div>

          <!-- Williner -->
          <div class="exp-item">
            <div class="exp-header" onclick="toggleExp(this)">
              <div>
                <span class="exp-role">Key User SAP / BI Specialist & Controller</span>
                <span class="exp-company">Sucesores de Alfredo Williner S.A. (L√°cteo)</span>
              </div>
              <div class="exp-date">2017 ‚Äî Present</div>
            </div>
            <div class="exp-body open">
              <ul>
                <li>
                  <span class="lang-es"><b>Key User SAP S/4HANA (GL/AA):</b> Liderazgo en configuraci√≥n, alineaci√≥n con negocio y soporte post go-live (2019).</span>
                  <span class="lang-en"><b>SAP S/4HANA Key User (GL/AA):</b> Leadership in configuration, business alignment, and post go-live support (2019).</span>
                </li>
                <li>
                  <span class="lang-es"><b>SAP Analytics Cloud (SAC):</b> Desarrollo end-to-end de dashboards (Ventas, M√°rgenes, P&L) y modelado de datos.</span>
                  <span class="lang-en"><b>SAP Analytics Cloud (SAC):</b> End-to-end dashboard development (Sales, Margins, P&L) and data modeling.</span>
                </li>
                <li>
                  <span class="lang-es">Cierre mensual GL-CO-AA, c√°lculo de KPIs (Aging, Rotaci√≥n), y P&L por CeBe/Cliente.</span>
                  <span class="lang-en">Monthly GL-CO-AA closing, KPI calculation (Aging, Turnover), and P&L by Profit Center/Customer.</span>
                </li>
              </ul>
            </div>
          </div>

          <!-- MAHLE -->
          <div class="exp-item">
            <div class="exp-header" onclick="toggleExp(this)">
              <div>
                <span class="exp-role">Controlling & Accounting Analyst</span>
                <span class="exp-company">MAHLE (Metal√∫rgica / Autopartes)</span>
              </div>
              <div class="exp-date">2008 ‚Äî 2017</div>
            </div>
            <div class="exp-body">
              <ul>
                <li>
                  <span class="lang-es">C√°lculo de <b>Tasas Est√°ndar</b> y cotizaciones para mercado OEM y reposici√≥n.</span>
                  <span class="lang-en">Calculation of <b>Standard Rates</b> and quotations for OEM and aftermarket.</span>
                </li>
                <li>
                  <span class="lang-es">Implementaci√≥n y cierre de <b>CO-PA</b> (hist√≥rico y reposici√≥n). An√°lisis de desv√≠os vs Budget.</span>
                  <span class="lang-en">Implementation and closing of <b>CO-PA</b> (historical and replacement). Variance analysis vs Budget.</span>
                </li>
                <li>
                  <span class="lang-es">Control de Capex, ajustes por inflaci√≥n interna y reportes regionales.</span>
                  <span class="lang-en">Capex control, internal inflation adjustments, and regional reporting.</span>
                </li>
              </ul>
            </div>
          </div>

          <!-- Megatone -->
          <div class="exp-item">
            <div class="exp-header" onclick="toggleExp(this)">
              <div>
                <span class="exp-role">Accounting Analyst</span>
                <span class="exp-company">Megatone (Retail)</span>
              </div>
              <div class="exp-date">2003 ‚Äî 2008</div>
            </div>
            <div class="exp-body">
              <ul>
                <li>
                  <span class="lang-es">Contabilidad integral de empresas del grupo (Tinsa S.A., Avenida A.C.E.).</span>
                  <span class="lang-en">Comprehensive accounting for group companies (Tinsa S.A., Avenida A.C.E.).</span>
                </li>
                <li>
                  <span class="lang-es">Seguimiento de cuenta corriente de proveedores y conciliaciones bancarias.</span>
                  <span class="lang-en">Supplier account monitoring and bank reconciliations.</span>
                </li>
              </ul>
            </div>
          </div>

        </div>
      </section>

      <!-- TAB: SKILLS -->
      <section id="skills" class="tab-content">
        <div class="card">
          <div class="card-title">
            <span class="lang-es">Matriz de Habilidades</span>
            <span class="lang-en">Skills Matrix</span>
          </div>
          
          <div class="skill-filters">
            <div class="filter-chip active" onclick="filterSkills('all', this)">All</div>
            <div class="filter-chip" onclick="filterSkills('sap', this)">SAP Ecosystem</div>
            <div class="filter-chip" onclick="filterSkills('data', this)">Data & BI</div>
            <div class="filter-chip" onclick="filterSkills('auto', this)">Automation & AI</div>
          </div>

          <div class="skills-grid">
            <!-- SAP -->
            <div class="skill-tag" data-cat="sap">üî∑ SAP S/4HANA</div>
            <div class="skill-tag" data-cat="sap">üî∑ SAP FI (GL, AA)</div>
            <div class="skill-tag" data-cat="sap">üî∑ SAP CO (CO-PA, PC)</div>
            <div class="skill-tag" data-cat="sap">üî∑ Material Ledger</div>
            <div class="skill-tag" data-cat="sap">üî∑ SAP Implementation</div>
            
            <!-- Data -->
            <div class="skill-tag" data-cat="data">üìä SAP Analytics Cloud</div>
            <div class="skill-tag" data-cat="data">üìä Power BI</div>
            <div class="skill-tag" data-cat="data">üìä Looker Studio</div>
            <div class="skill-tag" data-cat="data">üìä Excel Advanced</div>
            <div class="skill-tag" data-cat="data">üìä Python (Pandas)</div>
            
            <!-- Automation/AI -->
            <div class="skill-tag" data-cat="auto">ü§ñ Make (Integromat)</div>
            <div class="skill-tag" data-cat="auto">ü§ñ n8n</div>
            <div class="skill-tag" data-cat="auto">ü§ñ ChatGPT / Claude</div>
            <div class="skill-tag" data-cat="auto">ü§ñ Process Automation</div>
          </div>
        </div>
      </section>

      <!-- TAB: EDUCATION -->
      <section id="education" class="tab-content">
        <div class="dashboard-grid">
          <div class="card col-span-2">
            <div class="card-title">
              <span class="lang-es">Formaci√≥n Acad√©mica</span>
              <span class="lang-en">Academic Background</span>
            </div>
            <div class="exp-item">
              <div class="exp-role">
                <span class="lang-es">Contador P√∫blico Nacional</span>
                <span class="lang-en">Public Accountant (Bachelor's Degree)</span>
              </div>
              <div class="exp-company">Universidad Cat√≥lica de Santiago del Estero</div>
              <div class="exp-date">1998 ‚Äî 2005</div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">
              <span class="lang-es">Certificaciones</span>
              <span class="lang-en">Certifications</span>
            </div>
            <ul style="padding-left:20px; color:var(--text-muted); line-height:1.6;">
              <li><b>Udemy:</b> Data Science & Machine Learning (2022)</li>
              <li><b>Udemy:</b> Python Data Manipulation</li>
              <li><b>UPV:</b> Excel Avanzado & Data Analysis (2021)</li>
            </ul>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script>
    // --- L√ìGICA DE DATOS Y ESTADO ---
    let currentLang = localStorage.getItem('lang') || 'es';
    let currentTheme = localStorage.getItem('theme') || 'dark';
    let charts = {};

    document.addEventListener('DOMContentLoaded', () => {
      applyTheme(currentTheme);
      applyLang(currentLang);
      initCharts();
    });

    // --- CHART.JS CONFIGURACI√ìN ---
    function initCharts() {
      const textColor = getComputedStyle(document.body).getPropertyValue('--text-muted');
      const accent = getComputedStyle(document.body).getPropertyValue('--accent-primary');
      const accent2 = getComputedStyle(document.body).getPropertyValue('--accent-secondary');

      // Gr√°fico 1: Trayectoria (ACTUALIZADO: Orden Williner -> MAHLE -> Megatone)
      const ctx1 = document.getElementById('careerChart').getContext('2d');
      charts.career = new Chart(ctx1, {
        type: 'bar',
        data: {
          // Orden de las etiquetas
          labels: ['Williner', 'MAHLE', 'Megatone'],
          datasets: [{
            label: 'A√±os / Years',
            // Datos coincidentes con el orden de las etiquetas
            data: [8, 9, 5],
            // Colores: Williner destacado con accent, los otros con accent2
            backgroundColor: [accent, accent2, accent2],
            borderRadius: 6
          }]
        },
        options: {
          indexAxis: 'y', // Barras horizontales
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            x: { grid: { display: false }, ticks: { color: textColor } },
            y: { grid: { display: false }, ticks: { color: textColor, font: { weight: 'bold' } } }
          }
        }
      });

      // Gr√°fico 2: Skills Mix
      const ctx2 = document.getElementById('skillsChart').getContext('2d');
      charts.skills = new Chart(ctx2, {
        type: 'doughnut',
        data: {
          labels: ['SAP Core', 'BI & Data', 'Automation/AI', 'Finance'],
          datasets: [{
            data: [45, 30, 15, 10],
            backgroundColor: [accent, accent2, '#34d399', '#fbbf24'],
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'right', labels: { color: textColor, usePointStyle: true, font:{size:11} } }
          },
          cutout: '70%'
        }
      });
    }

    function updateChartsTheme() {
      const textColor = getComputedStyle(document.body).getPropertyValue('--text-muted');
      if (charts.career) {
        charts.career.options.scales.x.ticks.color = textColor;
        charts.career.options.scales.y.ticks.color = textColor;
        charts.career.update();
      }
      if (charts.skills) {
        charts.skills.options.plugins.legend.labels.color = textColor;
        charts.skills.update();
      }
    }

    // --- FUNCIONES INTERFAZ ---
    function switchTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      const btn = document.querySelector(`button[onclick="switchTab('${tabId}')"]`);
      if(btn) btn.classList.add('active');
      document.querySelector('main').scrollTop = 0;
    }

    function toggleExp(header) {
      const body = header.nextElementSibling;
      body.classList.toggle('open');
    }

    function filterSkills(cat, btn) {
      document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
      btn.classList.add('active');
      document.querySelectorAll('.skill-tag').forEach(tag => {
        if(cat === 'all' || tag.dataset.cat === cat) tag.classList.remove('hidden');
        else tag.classList.add('hidden');
      });
    }

    function toggleLang() {
      currentLang = currentLang === 'es' ? 'en' : 'es';
      localStorage.setItem('lang', currentLang);
      applyLang(currentLang);
    }

    function applyLang(lang) {
      document.documentElement.setAttribute('lang', lang);
      document.getElementById('langLabel').textContent = lang === 'es' ? 'EN' : 'ES';
    }

    function toggleTheme() {
      currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
      localStorage.setItem('theme', currentTheme);
      applyTheme(currentTheme);
    }

    function applyTheme(theme) {
      if (theme === 'light') document.body.classList.add('light-mode');
      else document.body.classList.remove('light-mode');
      setTimeout(updateChartsTheme, 100);
    }

    document.getElementById('copyMail').addEventListener('click', () => {
      navigator.clipboard.writeText('mcbriggiler@gmail.com');
      alert('Email copiado');
    });
  </script>
</body>
</html>
